Object.defineProperty(exports, "__esModule", {
    value: true
});
var _jsxFileName = '/Users/vdesai/Biometrix/FathomMobile/src/containers/ui/Menu/MenuView.js';

var _react = require('react');

var _react2 = babelHelpers.interopRequireDefault(_react);

var _reactNative = require('react-native');

var _reactNativeRouterFlux = require('react-native-router-flux');

var _reactNativeElements = require('react-native-elements');

var _theme = require('@theme/');

var _ui = require('@ui/');

var roles = {
    admin: 'admin',
    athlete: 'athlete',
    biometrixAdmin: 'biometrix_admin',
    manager: 'manager',
    researcher: 'researcher'
};

var MENU_BG_COLOR = '#2E3234';

var styles = _reactNative.StyleSheet.create({
    backgroundFill: {
        backgroundColor: _theme.AppColors.brand.primary,
        height: _theme.AppSizes.screen.height,
        width: _theme.AppSizes.screen.width,
        position: 'absolute',
        top: 0,
        left: 0
    },
    container: {
        position: 'relative',
        flex: 1
    },
    menuContainer: {
        flex: 3,
        left: 0,
        right: 0,
        backgroundColor: _theme.AppColors.brand.primary,
        paddingTop: _theme.AppSizes.padding,
        paddingBottom: _theme.AppSizes.padding
    },
    imageContainer: {
        flex: 1,
        margin: 20
    },

    menu: {
        flex: 3,
        left: 0,
        right: 0,
        backgroundColor: _theme.AppColors.brand.primary,
        paddingTop: _theme.AppSizes.statusBarHeight
    },
    menuItem: {
        borderBottomWidth: 1,
        borderBottomColor: _theme.AppColors.border,
        padding: 10,
        flexDirection: 'row'
    },
    menuItem_text: {
        fontSize: 18,
        lineHeight: parseInt(18 + 18 * 0.5, 10),
        fontWeight: 'normal',
        color: '#EEEFF0',
        paddingLeft: _theme.AppSizes.padding * 2.5
    },

    menuBottom: {
        flex: 1,
        left: 0,
        right: 0,
        justifyContent: 'flex-end',
        paddingBottom: 10
    },
    menuBottom_text: {
        color: '#EEEFF0',
        fontSize: 23
    }
});

var Menu = function (_Component) {
    babelHelpers.inherits(Menu, _Component);

    function Menu(props) {
        babelHelpers.classCallCheck(this, Menu);

        var _this = babelHelpers.possibleConstructorReturn(this, (Menu.__proto__ || Object.getPrototypeOf(Menu)).call(this, props));

        _this.logout = function () {
            if (_this.props.logout) {
                _this.props.logout().then(function () {
                    _this.props.closeSideMenu();
                    _reactNativeRouterFlux.Actions.login();
                }).catch(function (err) {
                    _reactNative.Alert.alert('Uh oh!', 'Something went wrong, please try again.');
                });
            }
        };

        _this.render = function () {
            var menu = _this.state.menu;

            var menuItems = [];
            menu.map(function (item, index) {
                var title = item.title,
                    onPress = item.onPress,
                    itemName = item.itemName;


                return menuItems.push(_react2.default.createElement(
                    _reactNative.TouchableOpacity,
                    {
                        key: 'menu-item-' + title,
                        onPress: onPress,
                        __source: {
                            fileName: _jsxFileName,
                            lineNumber: 191
                        }
                    },
                    _react2.default.createElement(
                        _reactNative.View,
                        { style: [styles.menuItem, { backgroundColor: _this.state.active === index ? '#FFFFFF' : _theme.AppColors.brand.primary }], __source: {
                                fileName: _jsxFileName,
                                lineNumber: 195
                            }
                        },
                        _react2.default.createElement(_reactNativeElements.Icon, { type: 'material-community', color: _this.state.active === index ? _theme.AppColors.brand.primary : '#FFFFFF', name: itemName, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 196
                            }
                        }),
                        _react2.default.createElement(
                            _ui.Text,
                            { style: [styles.menuItem_text, { color: _this.state.active === index ? _theme.AppColors.brand.primary : '#FFFFFF' }], __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 197
                                }
                            },
                            title
                        )
                    )
                ));
            });

            return _react2.default.createElement(
                _reactNative.View,
                { style: [styles.container], __source: {
                        fileName: _jsxFileName,
                        lineNumber: 207
                    }
                },
                _react2.default.createElement(_reactNative.View, { style: [styles.backgroundFill], __source: {
                        fileName: _jsxFileName,
                        lineNumber: 208
                    }
                }),
                _react2.default.createElement(_reactNative.Image, { resizeMode: _reactNative.Image.resizeMode.contain, style: [styles.imageContainer, { borderRadius: 50 }], source: { uri: _this.props.user.avatar_url }, __source: {
                        fileName: _jsxFileName,
                        lineNumber: 210
                    }
                }),
                _react2.default.createElement(_ui.Spacer, {
                    __source: {
                        fileName: _jsxFileName,
                        lineNumber: 212
                    }
                }),
                _react2.default.createElement(
                    _ui.Text,
                    {
                        style: [styles.menuBottom_text, _theme.AppStyles.textCenterAligned],
                        __source: {
                            fileName: _jsxFileName,
                            lineNumber: 214
                        }
                    },
                    _this.props.user.first_name && _this.props.user.last_name ? _this.props.user.first_name + ' ' + _this.props.user.last_name : _this.props.user.role
                ),
                _react2.default.createElement(_ui.Spacer, {
                    __source: {
                        fileName: _jsxFileName,
                        lineNumber: 223
                    }
                }),
                _react2.default.createElement(
                    _reactNative.View,
                    { style: [styles.menuContainer], __source: {
                            fileName: _jsxFileName,
                            lineNumber: 225
                        }
                    },
                    _react2.default.createElement(
                        _reactNative.View,
                        { style: [styles.menu], __source: {
                                fileName: _jsxFileName,
                                lineNumber: 226
                            }
                        },
                        menuItems
                    ),
                    _react2.default.createElement(
                        _reactNative.View,
                        { style: [styles.menuBottom], __source: {
                                fileName: _jsxFileName,
                                lineNumber: 228
                            }
                        },
                        _react2.default.createElement(
                            _reactNative.View,
                            { style: [_theme.AppStyles.paddingHorizontal, _theme.AppStyles.paddingVerticalSml], __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 229
                                }
                            },
                            _react2.default.createElement(_ui.Button, {
                                style: { fontFamily: 'ProximaNova-Regular' },
                                backgroundColor: MENU_BG_COLOR,
                                title: 'Log Out',
                                onPress: _this.logout,
                                __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 230
                                }
                            })
                        )
                    )
                )
            );
        };

        var action = void 0;

        switch (_this.props.user.role) {
            case roles.admin:
                action = _reactNativeRouterFlux.Actions.adminTeamManagement;
                break;
            case roles.athlete:
                action = _reactNativeRouterFlux.Actions.athleteAthleteManagement;
                break;
            case roles.biometrixAdmin:
                action = _reactNativeRouterFlux.Actions.managerTeamManagement;
                break;
            case roles.manager:
                action = _reactNativeRouterFlux.Actions.managerTeamManagement;
                break;
            case roles.researcher:
                action = _reactNativeRouterFlux.Actions.researcherSubjectManagement;
                break;
            default:
                break;
        }

        _this.state = {
            active: 0,
            menu: [{
                itemName: 'pulse',
                title: 'Capture Session',
                onPress: function onPress() {
                    _this.props.closeSideMenu();action();_this.setState({ active: 0 });
                }
            }, {
                itemName: 'mixcloud',
                title: 'Manage Kit',
                onPress: function onPress() {
                    _this.props.closeSideMenu();_this.setState({ active: 1 });_reactNativeRouterFlux.Actions.kitManagement();
                }
            }]
        };
        return _this;
    }

    return Menu;
}(_react.Component);

Menu.propTypes = {
    logout: _react.PropTypes.func.isRequired,
    closeSideMenu: _react.PropTypes.func.isRequired,
    user: _react.PropTypes.shape({
        role: _react.PropTypes.string,
        first_name: _react.PropTypes.string,
        last_name: _react.PropTypes.string,
        avatar_url: _react.PropTypes.string
    })
};
Menu.defaultProps = {
    user: null
};
exports.default = Menu;